(this.webpackJsonpvkhack_irkutsk202010=this.webpackJsonpvkhack_irkutsk202010||[]).push([[0],{282:function(e,t,c){},315:function(e,t,c){"use strict";c.r(t);c(194),c(220),c(222),c(223),c(225),c(226),c(227),c(228),c(229),c(230),c(231),c(232),c(234),c(235),c(236),c(237),c(238),c(239),c(240),c(241),c(242),c(243),c(245),c(246),c(247),c(248),c(249),c(250),c(251),c(252),c(253),c(254),c(255),c(256),c(257),c(258),c(259),c(260),c(261),c(262);var a=c(0),s=c.n(a),n=c(81),r=c.n(n),i=c(30),l=c.n(i),j=c(52),d=c.n(j),o=c(63),b=c(25),u=c(45),h=c.n(u),x=c(85),O=c.n(x),m=(c(271),c(4)),p=c(31),f=c.n(p),g=c(32),y=c.n(g),v=c(11),k=c.n(v),z=(c(282),c(1)),M=function(e){var t=e.id,c=(e.setModal,e.streams),a={width:140,height:100,borderRadius:8,border:"1px solid var(--placeholder_icon_background)",objectFit:"cover"};return Object(z.jsxs)(f.a,{id:t,children:[Object(z.jsx)(y.a,{children:"\u0421\u0442\u0440\u0438\u043c\u044b"}),Object(z.jsx)(k.a,{children:c.map((function(e,t){if(e.end>Date.now())return Object(z.jsx)(m.n,{size:"l",before:Object(z.jsx)("img",{style:a,src:"https://bel.cultreg.ru/uploads/"+e.cover.name}),actions:Object(z.jsx)(s.a.Fragment,{children:Object(z.jsx)(m.b,{mode:"secondary",href:"https://bel.cultreg.ru/live/streams/"+e._id+"/"+e.sysName,children:"\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c"})}),multiline:!0,children:e.name},t)}))})]})},_=c(37),w=c.n(_),S=c(131),C=c.n(S);function L(){return P.apply(this,arguments)}function P(){return(P=Object(o.a)(d.a.mark((function e(){var t,c,a,s=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"events",c={method:"GET",url:"https://elpodzayv.000webhostapp.com/proxy.php?type="+t},e.next=4,C()(c).then((function(e){a="false"!==e&&e.data[Object.keys(e.data)[0]]})).catch((function(e){a=!1}));case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R=function(e){var t=e.id,c=(e.setModal,e.articles);return Object(z.jsxs)(f.a,{id:t,children:[Object(z.jsx)(y.a,{children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(z.jsx)(k.a,{children:Object(z.jsx)(m.n,{disabled:!0})}),Object(z.jsx)(w.a,{header:Object(z.jsx)(m.h,{mode:"secondary",children:"\u041c\u043e\u0438 \u0431\u0435\u0441\u0435\u0434\u044b"}),children:Object(z.jsx)(k.a,{children:c?c.map((function(e,t){return Object(z.jsx)(m.i,{href:e.url,target:"_blank",children:Object(z.jsx)(m.e,{before:Object(z.jsx)(m.a,{}),description:e.subject,children:e.name})},t)})):null})})]})},T=c(320),F=c(50),I=c(14),q=c.n(I),D=c(317),E=c(318),K=c(319),W=function(e){var t,c=e.id,a=e.setModal,s=e.data;return Object(z.jsx)(m.l,{activeModal:c,children:Object(z.jsxs)(m.j,{id:c,onClose:function(){a(null)},header:Object(z.jsx)(m.k,{right:Object(z.jsx)(m.m,{onClick:function(){return a(null)},children:Object(z.jsx)(D.a,{})})}),children:[Object(z.jsx)(m.e,{size:"l",header:s.name,subtitle:s.description,children:Object(z.jsx)("img",{style:{marginLeft:"auto",marginRight:"auto",width:340,height:222,borderRadius:8,border:"1px solid var(--placeholder_icon_background)",objectFit:"cover",display:"block"},src:"https://bel.cultreg.ru/uploads/"+s.image.name})}),Object(z.jsxs)(m.c,{size:"l",mode:"shadow",children:[Object(z.jsx)(m.r,{style:(t={marginLeft:16,marginTop:16},Object(F.a)(t,"marginLeft",16),Object(F.a)(t,"marginBottom",16),t),children:s.content.map((function(e,t){return Object(z.jsx)(k.a,{id:t,dangerouslySetInnerHTML:{__html:e.text}})}))}),s.master.contacts.map((function(e,t){return"vk"===e.type?Object(z.jsx)(k.a,{children:Object(z.jsx)(m.b,{size:"xl",href:e.vk,children:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0432 \u0412\u041a"})}):"ok"===e.type?Object(z.jsx)(k.a,{children:Object(z.jsx)(m.b,{size:"xl",href:e.ok,children:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0432 OK"})}):"phone"===e.type?Object(z.jsx)(k.a,{children:Object(z.jsx)(m.b,{size:"xl",href:"tel:+7"+e.phone,children:"\u041f\u043e\u0437\u0432\u043e\u043d\u0438\u0442\u044c"})}):"instagram"===e.type?Object(z.jsx)(k.a,{children:Object(z.jsx)(m.b,{size:"xl",url:e.instagram,children:"Instagram"})}):Object(z.jsx)(k.a,{children:Object(z.jsx)(m.b,{size:"xl",url:e[Object.keys(e)[1]],children:Object.keys(e)[1]})})}))]})]})})},A=function(e){var t,c=e.id,a=e.setModal,s=e.data;return Object(z.jsx)(m.l,{activeModal:"master"+c,children:Object(z.jsxs)(m.j,{id:"master"+c,onClose:function(){a(null)},header:Object(z.jsx)(m.k,{right:Object(z.jsx)(m.m,{onClick:function(){return a(null)},children:Object(z.jsx)(D.a,{})})}),children:[Object(z.jsx)(m.e,{size:"l",header:s.name,subtitle:s.about,children:Object(z.jsx)("img",{style:{marginLeft:"auto",marginRight:"auto",width:340,height:340,borderRadius:8,border:"1px solid var(--placeholder_icon_background)",objectFit:"scale-down",display:"block"},src:"https://bel.cultreg.ru/uploads/"+s.image.name})}),Object(z.jsxs)(m.c,{size:"l",mode:"shadow",children:[Object(z.jsxs)(m.r,{style:(t={marginLeft:16,marginTop:16},Object(F.a)(t,"marginLeft",16),Object(F.a)(t,"marginBottom",16),t),children:[s.gallery.length>0?Object(z.jsx)(m.g,{slideWidth:"90%",align:"center",style:{height:150},children:s.gallery.map((function(e,t){return Object(z.jsx)("img",{style:{objectFit:"scale-down"},src:"https://bel.cultreg.ru/uploads/"+e.name})}))}):"",s.content.map((function(e,t){return Object(z.jsx)(k.a,{id:t,dangerouslySetInnerHTML:{__html:e.text}})}))]}),Object(z.jsx)(k.a,{children:Object(z.jsx)(m.b,{size:"xl",href:"mailto:"+s.email,children:"E-mail"})}),s.contacts.map((function(e,t){return"vk"===e.type?Object(z.jsx)(k.a,{children:Object(z.jsx)(m.b,{size:"xl",href:e.vk,children:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0432 \u0412\u041a"})}):"ok"===e.type?Object(z.jsx)(k.a,{children:Object(z.jsx)(m.b,{size:"xl",href:e.ok,children:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0432 OK"})}):"phone"===e.type?Object(z.jsx)(k.a,{children:Object(z.jsx)(m.b,{size:"xl",href:"tel:+7"+e.phone,children:"\u041f\u043e\u0437\u0432\u043e\u043d\u0438\u0442\u044c"})}):"instagram"===e.type?Object(z.jsx)(k.a,{children:Object(z.jsx)(m.b,{size:"xl",url:e.instagram,children:"Instagram"})}):Object(z.jsx)(k.a,{children:Object(z.jsx)(m.b,{size:"xl",url:e[Object.keys(e)[1]],children:Object.keys(e)[1]})})}))]})]})})},B=function(e){var t,c=e.id,a=e.setModal,s=e.data;return Object(z.jsx)(m.l,{activeModal:"event"+c,children:Object(z.jsxs)(m.j,{id:"event"+c,onClose:function(){a(null)},header:Object(z.jsx)(m.k,{right:Object(z.jsx)(m.m,{onClick:function(){return a(null)},children:Object(z.jsx)(D.a,{})})}),children:[Object(z.jsx)(m.e,{size:"l",header:s.name,subtitle:s.about,children:Object(z.jsx)("img",{style:{marginLeft:"auto",marginRight:"auto",width:340,height:340,borderRadius:8,border:"1px solid var(--placeholder_icon_background)",objectFit:"scale-down",display:"block"},src:"https://bel.cultreg.ru/uploads/"+s.image.name})}),Object(z.jsx)(m.c,{size:"l",mode:"shadow",children:Object(z.jsxs)(m.r,{style:(t={marginLeft:16,marginTop:16},Object(F.a)(t,"marginLeft",16),Object(F.a)(t,"marginBottom",16),t),children:[Object(z.jsx)(m.g,{slideWidth:"90%",align:"right",style:{height:150},children:s.gallery.map((function(e,t){return Object(z.jsx)("img",{style:{objectFit:"scale-down"},src:"https://bel.cultreg.ru/uploads/"+e.name})}))}),s.content.map((function(e,t){return Object(z.jsx)(k.a,{id:t,dangerouslySetInnerHTML:{__html:e.text}})})),Object(z.jsxs)(k.a,{children:[Object(z.jsx)(m.e,{before:Object(z.jsx)(E.a,{}),children:new Date(s.start).toLocaleString()}),Object(z.jsx)(m.e,{multiline:!0,before:Object(z.jsx)(K.a,{}),children:s.locales[2].name+","+s.locales[1].name+","+s.locales[0].name+","+s.organization.name})]})]})})]})})};B.PropTypes={id:q.a.string.isRequired,data:q.a.array,setModal:q.a.func},A.PropTypes={id:q.a.string.isRequired,data:q.a.array,setModal:q.a.func},W.PropTypes={id:q.a.string.isRequired,data:q.a.array,setModal:q.a.func};var H=function(e){var t=e.id,c=e.setModal,a=e.events;return Object(z.jsxs)(f.a,{id:t,children:[Object(z.jsx)(y.a,{children:"\u041c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f"}),Object(z.jsx)(w.a,{children:Object(z.jsx)(k.a,{children:a.map((function(e,t){if(e.end>Date.now())return Object(z.jsx)(m.n,{description:e.about,before:Object(z.jsx)(m.a,{size:48,src:"https://bel.cultreg.ru/uploads/"+e.image.name}),after:Object(z.jsx)(T.a,{onClick:function(){c(Object(z.jsx)(B,{id:e._id,data:e,setModal:c}))}}),multiline:!0,disabled:!0,children:e.name})}))})})]})},V=c(65),G=function(e){var t=e.id,c=(e.setModal,e.places),n=Object(a.useState)([55.75,37.57]),r=Object(b.a)(n,2),i=r[0],l=r[1];return Object(a.useEffect)((function(){console.log(i)}),[i]),Object(z.jsxs)(f.a,{id:t,children:[Object(z.jsx)(y.a,{children:"\u041c\u0435\u0441\u0442\u0430"}),Object(z.jsx)(w.a,{children:Object(z.jsxs)(k.a,{children:[Object(z.jsx)(m.e,{size:"xl",children:Object(z.jsx)(V.c,{children:Object(z.jsx)(V.a,{id:"map",style:{marginLeft:"auto",marginRight:"auto",width:340,height:222,borderRadius:8,border:"1px solid var(--placeholder_icon_background)",objectFit:"cover",display:"block"},defaultState:{center:[20,30],zoom:9},state:{center:i,zoom:9},children:c.map((function(e,t){return Object(z.jsx)(V.b,{geometry:[e.mapPosition.coordinates[0],e.mapPosition.coordinates[1]]})}))})})}),Object(z.jsx)(k.a,{children:c.map((function(e,t){return Object(z.jsx)(m.n,{before:Object(z.jsx)(m.a,{size:48,src:"https://bel.cultreg.ru/uploads/"+e.image.name}),actions:Object(z.jsx)(s.a.Fragment,{children:Object(z.jsx)(m.b,{href:"#map",children:"\u041d\u0430 \u043a\u0430\u0440\u0442\u0435"})}),text:e.description,onClick:function(){l([e.mapPosition.coordinates[0],e.mapPosition.coordinates[1]])},multiline:!0,disable:!0,children:e.name},t)}))})]})})]})},J=c(321),N=c(322),U=c(323),Q=c(324),X=function(e){var t=e.id,c=(e.modal,e.setModal),a=e.products;return Object(z.jsxs)(f.a,{id:t,children:[Object(z.jsx)(y.a,{children:"\u0418\u0437\u0434\u0435\u043b\u0438\u044f"}),a?a.map((function(e,t){return Object(z.jsx)(m.n,{disabled:!0,multiline:!0,before:Object(z.jsx)(m.a,{size:72,src:"https://bel.cultreg.ru/uploads/"+e.image.name}),text:e.category?e.category.name:null,caption:new Date(e.updateDate).toLocaleString(),after:e.price?e.price.value+" \u20bd":function(){console.log(e)},actions:Object(z.jsx)(s.a.Fragment,{children:Object(z.jsx)(m.b,{mode:"secondary",onClick:function(){c(Object(z.jsx)(W,{id:e._id,data:e,setModal:c}))},children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"})}),children:e.name})})):null,Object(z.jsx)(w.a,{children:Object(z.jsx)(m.d,{size:"l"})})]})},Y=function(e){var t=e.id,c=e.setModal,s=e.masters,n=Object(a.useState)(null),r=Object(b.a)(n,2);r[0],r[1];return Object(z.jsxs)(f.a,{id:t,children:[Object(z.jsx)(y.a,{children:"\u041c\u0430\u0441\u0442\u0435\u0440\u0430"}),Object(z.jsx)(w.a,{children:Object(z.jsxs)(k.a,{children:[s?null:Object(z.jsx)(m.e,{children:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0433\u0440\u0443\u0437\u044f\u0442\u0441\u044f"}),s.map((function(e,t){return Object(z.jsx)(m.o,{before:Object(z.jsx)(m.a,{size:48,src:"https://bel.cultreg.ru/uploads/"+e.image.name}),after:Object(z.jsx)(T.a,{onClick:function(){c(Object(z.jsx)(A,{id:e._id,data:e,setModal:c}))}}),description:e.about,multiline:!0,disabled:!0,children:e.name})}))]})})]})},Z=function(){var e=Object(a.useState)(null),t=Object(b.a)(e,2),c=(t[0],t[1],Object(a.useState)(null)),s=Object(b.a)(c,2),n=s[0],r=s[1],i=Object(a.useState)(Object(z.jsx)(O.a,{size:"large"})),j=Object(b.a)(i,2),u=j[0],x=j[1],p=Object(a.useState)("products"),f=Object(b.a)(p,2),g=f[0],y=f[1],v=Object(a.useState)([]),k=Object(b.a)(v,2),_=k[0],w=k[1],S=Object(a.useState)([]),C=Object(b.a)(S,2),P=C[0],T=C[1],F=Object(a.useState)([]),I=Object(b.a)(F,2),q=I[0],D=I[1],E=Object(a.useState)([]),W=Object(b.a)(E,2),A=W[0],B=W[1],V=Object(a.useState)([]),Z=Object(b.a)(V,2),$=Z[0],ee=Z[1],te=Object(a.useState)([]),ce=Object(b.a)(te,2),ae=ce[0],se=ce[1];Object(a.useEffect)((function(){function e(){return(e=Object(o.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(Object(z.jsx)(O.a,{size:"large"})),e.next=3,l.a.send("VKWebAppGetUserInfo");case 3:if(e.sent,"articles"!==g){e.next=10;break}return e.t0=D,e.next=8,L("articles");case 8:e.t1=e.sent,(0,e.t0)(e.t1);case 10:if("streams"!==g){e.next=16;break}return e.t2=w,e.next=14,L("streams");case 14:e.t3=e.sent,(0,e.t2)(e.t3);case 16:if("events"!==g){e.next=22;break}return e.t4=T,e.next=20,L("events");case 20:e.t5=e.sent,(0,e.t4)(e.t5);case 22:if("places"!==g){e.next=28;break}return e.t6=B,e.next=26,L("places");case 26:e.t7=e.sent,(0,e.t6)(e.t7);case 28:if("products"!==g){e.next=34;break}return e.t8=ee,e.next=32,L("products");case 32:e.t9=e.sent,(0,e.t8)(e.t9);case 34:if("masters"!==g){e.next=40;break}return e.t10=se,e.next=38,L("masters");case 38:e.t11=e.sent,(0,e.t10)(e.t11);case 40:x(null);case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}l.a.subscribe((function(e){var t=e.detail,c=t.type,a=t.data;if("VKWebAppUpdateConfig"===c){var s=document.createAttribute("scheme");s.value=a.scheme?a.scheme:"client_light",document.body.attributes.setNamedItem(s)}})),function(){e.apply(this,arguments)}()}),[g]);var ne=function(e){y(e.currentTarget.dataset.story)};return Object(z.jsxs)(m.f,{activeStory:g,tabbar:Object(z.jsxs)(m.p,{children:[Object(z.jsx)(m.q,{onClick:ne,selected:"products"===g,"data-story":"products",text:"\u0418\u0437\u0434\u0435\u043b\u0438\u044f",children:Object(z.jsx)(J.a,{})}),Object(z.jsx)(m.q,{onClick:ne,selected:"masters"===g,"data-story":"masters",text:"\u041c\u0430\u0441\u0442\u0435\u0440\u0430",children:Object(z.jsx)(N.a,{})}),Object(z.jsx)(m.q,{onClick:ne,selected:"events"===g,"data-story":"events",text:"\u041c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f",children:Object(z.jsx)(U.a,{})}),Object(z.jsx)(m.q,{onClick:ne,selected:"places"===g,"data-story":"places",text:"\u041c\u0435\u0441\u0442\u0430",children:Object(z.jsx)(K.a,{})}),Object(z.jsx)(m.q,{onClick:ne,selected:"streams"===g,"data-story":"streams",text:"\u0421\u0442\u0440\u0438\u043c\u044b",children:Object(z.jsx)(Q.a,{})})]}),children:[Object(z.jsx)(h.a,{popout:u,id:"products",activePanel:"products",modal:n,children:Object(z.jsx)(X,{id:"products",setModal:r,products:$,modal:n})}),Object(z.jsx)(h.a,{popout:u,id:"masters",activePanel:"masters",modal:n,children:Object(z.jsx)(Y,{id:"masters",setModal:r,masters:ae,modal:n})}),Object(z.jsx)(h.a,{popout:u,id:"streams",activePanel:"streams",modal:n,children:Object(z.jsx)(M,{id:"streams",setModal:r,streams:_})}),Object(z.jsx)(h.a,{popout:u,id:"places",activePanel:"places",modal:n,children:Object(z.jsx)(G,{id:"places",setModal:r,places:A})}),Object(z.jsx)(h.a,{popout:u,id:"articles",activePanel:"articles",modal:n,children:Object(z.jsx)(R,{id:"articles",setModal:r,articles:q})}),Object(z.jsx)(h.a,{popout:u,id:"events",activePanel:"events",modal:n,children:Object(z.jsx)(H,{id:"events",setModal:r,events:P})})]})};l.a.send("VKWebAppInit"),r.a.render(Object(z.jsx)(Z,{}),document.getElementById("root"))}},[[315,1,2]]]);
//# sourceMappingURL=main.aff43583.chunk.js.map